---
# load specific variables
- name: Include OS-specific variables.
  include_vars: '{{ item }}'
  with_fileglob:
    - '{{ playbook_dir }}/variables/packages.yml'

- name: Tweaking system global settings
  become: true
  become_user: root
  become_method: sudo
  block:
    - name: configure name servers
      template:
        src: resolv.j2
        dest: /etc/resolv.conf
    - name: Tweak dnf settings
      template:
        src: dnf.j2
        dest: /etc/dnf/dnf.conf
    - name: Install base packages
      package:
        name: '{{ item }}'
        state: present
      with_items: '{{base_packages}}'
