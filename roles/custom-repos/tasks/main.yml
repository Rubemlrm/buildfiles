- name: Add Custom repos for Red Hat Based
  become: true
  become_user: root
  become_method: sudo
  block:
    - name: 'install copr tools'
      dnf:
        name: ['fedora-workstation-repositories', 'dnf-plugins-core']
        state: present
    - name: 'set copr repos'
      command: 'dnf copr enable {{item}} -y'
      with_items:
        - 'evana/fira-code-fonts'
        - 'daniruiz/flat-remix'
    - name: 'set workstation repos'
      command: 'dnf config-manager --set-enabled  {{item}} -y'
      with_items:
        - 'google-chrome'
    - name: 'set repos'
      dnf:
        name:
          [
            'http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-{{fedora_current }}.noarch.rpm',
            'http://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-{{fedora_current }}.noarch.rpm',
          ]
        state: present
  when: ansible_os_family == "RedHat"

- name: Add Custom repos for Debian Based
  become: true
  become_user: root
  become_method: sudo
  block:
    - name: Add gpg keys
      apt_key:
        url: '{{ item.url }}'
        state: '{{ item.state }}'
      with_items:
        - url: https://download.docker.com/linux/debian/gpg
          state: present
    - name: Add repos
      apt_repository:
        repo: '{{ item.repo }}'
        state: '{{ item.state }}'
      with_items:
        - repo: 'deb [arch=amd64] https://download.docker.com/linux/debian {{debian_current}} stable'
          state: present
          update_cache: true
    - name: update repos
      raw: apt-get update
    - name: add repos with curl
      raw: '{{ item }}'
      with_items:
        - curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash -
  when: ansible_os_family == "Debian"
